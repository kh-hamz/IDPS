{% extends 'core/navbar.html' %}
{% load static %}

{% block title %}Settings - Sentinel{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/settings.css' %}" />
{% endblock %}

{% block content %}
<div class="settings-container">
  
  <!-- Header -->
  <div class="settings-header">
    <h1>System Settings</h1>
    <p>Configure system rules, manage users, and set notification preferences.</p>
  </div>

  <!-- Rule Updates Section -->
  <div class="section">
    <h2>Rule Updates</h2>
    <div class="rule-update-item">
      <div class="rule-info">
        <div class="rule-details">
          <p class="rule-title">Update Rules</p>
          <p class="last-updated">Last updated: {{ last_updated|default:"Not available" }}</p>
        </div>
        <div class="rule-action">
          <button class="btn btn-secondary">Check for Updates</button>
        </div>
      </div>
    </div>
  </div>

  <!-- User Management Section -->
  <div class="section">
    <h2>User Management</h2>
    <div class="table-container">
      <div class="table-wrapper">
        <table class="user-table">
          <thead>
            <tr>
              <th>Username</th>
              <th>Role</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
            <tr>
              <td>{{ user.username }}</td>
              <td>{{ user.role }}</td>
              <td>
                <button class="status-btn {% if user.status == 'Active' %}status-active{% else %}status-inactive{% endif %}">
                  {{ user.status }}
                </button>
              </td>
              <td>
                <button class="action-link">Edit</button>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="4" class="no-users">No users available</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="section-actions">
      <button class="btn btn-primary">Add User</button>
    </div>
  </div>

  <!-- Notification Preferences Section -->
  <div class="section">
    <h2>Notification Preferences</h2>
    
    <div class="form-group">
      <label for="email_notifications">Email Notifications</label>
      <select id="email_notifications" class="form-select">
        <option value="enabled" {% if email_notifications == "enabled" %}selected{% endif %}>Enabled</option>
        <option value="disabled" {% if email_notifications == "disabled" %}selected{% endif %}>Disabled</option>
      </select>
    </div>

    <div class="form-group">
      <label for="sms_notifications">SMS Notifications</label>
      <select id="sms_notifications" class="form-select">
        <option value="enabled" {% if sms_notifications == "enabled" %}selected{% endif %}>Enabled</option>
        <option value="disabled" {% if sms_notifications == "disabled" %}selected{% endif %}>Disabled</option>
      </select>
    </div>
  </div>

  <!-- Reports and Logs Section -->
  <div class="section">
    <h2>Reports and Logs</h2>
    <div class="section-actions">
      <button class="btn btn-primary">Export Reports</button>
      <button class="btn btn-primary">Manage Logs</button>
    </div>
  </div>

</div>
{% endblock %}